# 数据源配置管理

Qross 系统可以使用其他系统或配置中心（如 Nacos）配置的数据连接，从而避免重复配置。或者把 Qross 系统需要的数据连接在配置中心统一配置，以方便统一管理。Qross 系统支持从本地配置文件、项目`resources`资源目录、Nacos 配置中心、其他提供 URL 的配置中心或服务中读取数据源连接。数据源连接的各项设置需要以`key-value`的配置形式保存，所以系统支持`properties`、`yaml`、`json`文本格式。

这些数据源的连接配置信息除了可以在`qross.properties`文件中之外（参见 [PQL 数据源配置](/pql/properties.md)），还可以保存在数据库中，配置操作更直观，且适用范围更广，在分布式部署架构下，只需要配置一次即可，而不需要在每台机器上都添加配置。而且更新这些配置时，不需要重新启动系统。

数据源配置影响整个 Qross 系统，包括星硕（Master）管理平台、Keeper 调度工具以及所有连通 Qross 系统的 PQL 过程、Voyager 模板引擎、OneApi 接口服务。数据源配置管理只是告诉 Qross 系统去哪里取数据源连接，而不是配置具体的连接信息。当然，也可以在[数据连接管理](/master/connections.md)中直接配置数据源连接。

数据源配置包含以下功能或信息项：

* **添加数据源配置** 在管理页右上角可以找到相应的绿色按钮。
* **启停用** Qross 系统只从启用的配置项加载数据连接配置。如果禁用了连接配置，“重新加载所有配置”功能并不会从在线系统（Master、Keeper 以及所有引用了 PQL 的 Spring Boot 项目）中移除已禁用的连接配置，直到它们下次重新启动。
* **ID** 数据表自增 ID。
* **标题或说明** 仅用于管理目的。在列表页点击标题可打开 **配置编辑页面**。
* **配置来源** 上面提到过，系统支持从本地配置文件、当前项目内的资源文件、Nacos 配置中心以及其他配置中心或服务中读取数据连接配置。
* **配置格式** 系统的数据连接保存为`key-value`形式，支持读取`properties`、`yaml`、`json`格式的配置。
* **文件地址或URL** 本地配置文件设置绝对路径、项目内的资源文件设置`resources`文件夹内的相对路径、Nacos 配置中心地址格式为`host:post:group:data-id`、其他配置中心或服务设置 URL 地址，Nacos 配置中心也可以选最后一项并设置完整 URL 地址。系统无法检查配置的正确性，请一定保证配置准备无误。
* **重新加载所有配置** 当添加或更新配置后，需要“重新加载配置”才能使两个在线系统使用最新的配置，在管理页面下方可以找到相应的绿色按钮。重新加载配置不会移除在这次系统启动之后禁用或删除的数据连接。
* **删除数据源配置** 当配置不再使用时，可从列表中移除，在 **配置编辑页面** 中可以找到“删除数据源配置”的红色按钮。

通过这些数据源配置加载的数据连接可以由系统所有用户使用，**未来** 可以用户管理模板设置某个角色或用户是否可以使用某个或某些系统连接。更多数据连接权限问题在[数据连接管理](/master/system/connections.md)中介绍。

---
参考链接

* [数据连接配置](/master/system/connections.md)
* [系统设置](/master/system/step.md)