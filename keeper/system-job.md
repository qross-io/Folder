# Keeper 系统调度

Keeper 有`3`个系统作业，用于 Keeper 正常的维护工作。系统作业所有信息项均不可修改。简要说明如下：

## 任务清理

在调度作业中可以设置任务副本的最大数量，超过这个数量的任务副本及其相关信息都会被删除掉。这个作业用于定时清理超过记录数的任务副本，每小时`27`分执行。将被清理的信息如下：

* 任务及所有任务运行记录
* 任务及所有记录的运行日志
* 任务及所有记录的相关依赖信息
* 任务及所有记录的工作流信息
* 任务及所有记录的事件信息

这个作业的 PQL 文件名称为`keeper_clean.sql`。

## 调度统计

这个作业在每小时`0`分统计 Keeper 各个图表需要的数据，包含以下指标：

* 新建任务数量
* 正在执行的任务数量
* 正在运行的命令数量

每天`0`点统计前一天的指标

* 新建任务数
* 异常任务数
* 异常任务记录数

这个作业的 PQL 文件名称为`keeper_stat.sql`。

## 系统清理

在“系统设置”中可以设置保留多少天的系统日志，超过这个天数的系统日志将会被清理掉，以节省磁盘空间。

这个作业设定在每天凌晨`2`点执行，将清理以下过期的日志：

* Keeper 心跳日志
* Keeper 运行日志
* Keeper 异常日志
* Keeper 服务器监控
* 卡死的任务记录

这个作业的 PQL 文件名称为`keeper_system_clean.sql`。


---
参考链接

* [Keeper 设置](/keeper/settings.md)
* [Keeper 监控](/keeper/monitor.md)
* [调度作业](/keeper/job.md)